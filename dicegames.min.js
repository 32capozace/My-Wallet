function calculateProfitLoss(c){setLoadingText("Calculating Profit / Loss");var b=c.find('input[name="send-to-address"]');var a=[];$(b).each(function(){a.push($(this).val())});if(a.length==0){return}$.get(root+"walletprofitloss?input_address="+getActiveAddresses().join("|")+"&output_address="+a.join("|")+"&format=plain").success(function(f){var d=c.find(".profit-loss").show(200);d.find(".n-bets").text(f.n_sent);var e=f.result;if(e>0){d.find(".winnings").html('<font color="green">'+formatMoney(e,true)+"</font>")}else{if(e<0){d.find(".winnings").html('<font color="red">'+formatMoney(e,true)+"</font>")}else{d.find(".winnings").html(formatMoney(e,true))}}d.find(".refresh").unbind().click(function(){calculateProfitLoss(c)})})}function multiBetWarningModal(d,c,a){var b=$('<div class="modal hide">        <div class="modal-header">            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>            <h3>Confirm Multiple Bets</h3>        </div>        <div class="modal-body">            <p>This bet will be repeated <b class="times"></b> times. Please confirm this is correct.</p>        </div>        <div class="modal-footer">            <a href="#" class="btn btn-secondary">Cancel</a>            <a href="#" class="btn btn-primary">Continue</a>        </div>    </div>');$("body").append(b);b.modal({keyboard:true,backdrop:"static",show:true});b.find(".times").text(d);b.center();b.find(".btn.btn-primary").unbind().click(function(){b.modal("hide");b.remove();if(c){c()}});b.find(".btn.btn-secondary").unbind().click(function(){b.modal("hide");b.remove();if(a){a()}})}function buildForm(b){var a=b.find(".recipient-container");if(!a.is(":empty")){return}$.get(root+"dicegames?game="+b.data("name")).success(function(g){a.empty();var c=$('<div class="control-group"><label class="control-label">Win Odds</label><div class="controls"><p>Enter the amounts you wish to bet below:</p></div></div>');a.append(c);for(var e in g){var d=g[e];if(d.popular){a.append('<div class="control-group recipient"><label class="control-label">'+d.odds+'%</label><div class="controls"><input name="send-to-address" type="hidden" value="'+d.address+'" /><div class="input-append"> <input class="send-value" style="width:auto;max-width:145px;" data-optional="true" name="send-value" data-multiplier="'+d.multiplier+'" data-minbet="'+d.minBet+'" data-maxbet="'+d.maxBet+'" placeholder="Bet Amount (BTC)" type="text" /><span class="add-on send-win-amount">No Bet</span> </div></div></div>')}}function f(h){if(h.val()>0){h.parent().find(".send-win-amount").html("Win Amount: "+(parseFloat(h.val())*parseFloat(h.data("multiplier"))).toFixed(4)+" BTC")}else{h.parent().find(".send-win-amount").html("No Bet")}}a.find('input[name="send-value"]').change(function(){if($(this).val()>$(this).data("maxbet")){$(this).val($(this).data("maxbet"));makeNotice("error","misc-error","The Maximum Bet is "+$(this).data("maxbet")+" BTC")}if($(this).val()==0){$(this).val("")}else{if($(this).val()<$(this).data("minbet")){$(this).val($(this).data("minbet"));makeNotice("error","misc-error","The Minimum Bet is "+$(this).data("minbet")+" BTC")}}f($(this))});a.find('input[name="send-value"]').keyup(function(){f($(this))});b.find(".send").unbind().click(function(){var h=0;var j=$(this).data("repeat");if(!j){j=0}else{j=parseInt(j)}var i={on_success:function(){++h;if(h<j){setTimeout(k,100)}}};var k=function(){console.log("Send Called");var l=initNewTx();l.addListener(i);startTxUI(b,"dice",l)};if(j>1){multiBetWarningModal(j,function(){loadScript(resource+"wallet/signer.min.js",function(){k()})})}else{loadScript(resource+"wallet/signer.min.js",function(){k()})}});calculateProfitLoss(b)}).error(function(c){makeNotice("error","misc-error",c)})};