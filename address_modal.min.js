function showAddressModalMenu(a){var b=addresses[a];if(b==null){makeNotice("error","misc-error","Address Not Found");return}var c=$("#address-modal");c.modal({keyboard:true,backdrop:"static",show:true});c.find(".address").text(a);if(b.tag==2){c.find(".address-archive-button").hide()}if(b.priv==null){c.find(".address-sign-message").hide()}c.find(".btn.btn-secondary").unbind().click(function(){c.modal("hide")});c.find(".address-label-button").unbind().click(function(){c.modal("hide");labelAddressModal(a)});c.find(".address-qr-code-button").unbind().click(function(){c.modal("hide");showAddressModalQRCode(a)});c.find(".address-sign-message").unbind().click(function(){c.modal("hide");showAddressModalSignMessage(a)});c.find(".address-archive-button").unbind().click(function(){c.modal("hide");archiveAddr(a)})}function showAddressModalQRCode(a){var b=$("#qr-code-modal");b.modal({keyboard:true,backdrop:"static",show:true});b.find(".address").text(a);loadScript(resource+"wallet/qr.code.creator.js",function(){var c=makeQRCode(300,300,1,a);b.find(".address-qr-code").empty().append(c)});b.find(".address").text(a);b.find(".btn.btn-secondary").unbind().click(function(){b.modal("hide")})}function verifyMessageModal(){var b=$("#verify-message-modal");b.modal({keyboard:true,backdrop:"static",show:true});console.log("Verify Message");b.find(".address-result").hide();var c=b.find('textarea[name="message"]');var a=b.find('textarea[name="signature"]');b.find(".btn.btn-secondary").unbind().click(function(){b.modal("hide")});b.find("textarea").bind("change",function(){b.find(".address-result").hide()});b.find(".btn.btn-primary").unbind().click(function(){try{var f=$.trim(c.val());if(!f||f.length==0){makeNotice("error","misc-error","You Must Enter A Message To Verify");return}var g=$.trim(a.val());if(!g||g.length==0){makeNotice("error","misc-error","You Must Enter A Signature To Verify");return}console.log(f+" "+g);var d=Bitcoin.Message.verifyMessage(g,f);b.find(".address-result-txt").text(d);b.find(".address-result").show(200)}catch(h){makeNotice("error","misc-error","Error Verifying Message"+h);b.modal("hide");return}})}function showAddressModalSignMessage(a){getSecondPassword(function(){var c=$("#sign-message-modal");c.modal({keyboard:true,backdrop:"static",show:true});c.find(".signature").hide();var b=c.find('textarea[name="message"]');c.find(".address").text(a);c.find(".btn.btn-secondary").unbind().click(function(){c.modal("hide")});b.bind("change",function(){c.find(".signature").hide()});c.find(".btn.btn-primary").unbind().click(function(){var e=addresses[a];if(!e||!e.priv){c.modal("hide");return}var d=$.trim(b.val());if(!d||d.length==0){makeNotice("error","misc-error","You Must Enter A Message To Sign");return}var h=decodePK(e.priv);var g=new Bitcoin.ECKey(h);var f=Bitcoin.Message.signMessage(g,d,e.addr);c.find(".signature").show(200);c.find(".signature-result").text(f)})})}function labelAddressModal(b){var c=$("#label-address-modal");c.modal({keyboard:true,backdrop:"static",show:true});c.find(".address").text(b);var a=c.find('input[name="label"]');c.find(".address").text(b);a.val("");c.find(".btn.btn-primary").unbind().click(function(){c.modal("hide");var d=a.val();if(d.length==0){makeNotice("error","misc-error","you must enter a label for the address");return false}addresses[b].label=d;backupWalletDelayed();buildVisibleView()});c.find(".btn.btn-secondary").unbind().click(function(){c.modal("hide")})};