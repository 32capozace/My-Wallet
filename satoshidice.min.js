var satoshi_dice_games=null;function calculateProfitLoss(){setLoadingText("Calculating Profit / Loss");if(!satoshi_dice_games){return}var a=[];for(var b in satoshi_dice_games){a.push(satoshi_dice_games[b].address)}$.get(root+"walletprofitloss?input_address="+getActiveAddresses().join("|")+"&output_address="+a.join("|")+"&format=plain").success(function(f){var e=$("#send-satoshi-dice");var c=e.find(".profit-loss").show(200);c.find(".n-bets").text(f.n_sent+f.n_received);c.find(".n-pending").text(f.n_sent-f.n_received);var d=f.total_received-f.total_sent;if(d>0){c.find(".winnings").html('<font color="green">'+formatMoney(d,true)+"</font>")}else{if(d<0){c.find(".winnings").html('<font color="red">'+formatMoney(d,true)+"</font>")}else{c.find(".winnings").html(formatMoney(d,true))}}c.find(".refresh").unbind().click(function(){calculateProfitLoss()})})}function buildForm(){if(satoshi_dice_games){return}var a=$("#send-satoshi-dice");$.get(root+"satoshidice").success(function(j){satoshi_dice_games=j;var b=a.find(".recipient-container");b.empty();var f=$('<div class="control-group"><label class="control-label">Win Odds</label><div class="controls"><p class="help-block">Enter the amounts you wish to bet below:</p></div></div>');b.append(f);for(var h in j){var g=j[h];if(g.popular){b.append('<div class="control-group recipient"><label class="control-label">'+g.odds+'%</label><div class="controls"><input name="send-to-address" type="hidden" value="'+g.address+'" /><div class="input-append"> <input class="send-value" style="width:auto;max-width:145px;" data-optional="true" name="send-value" data-multiplier="'+g.multiplier+'" data-minbet="'+g.minBet+'" data-maxbet="'+g.maxBet+'" placeholder="Bet Amount (BTC)" type="text" /><span class="add-on send-win-amount">No Bet</span> </div></div></div>')}}function c(e){if(e.val()>0){e.parent().find(".send-win-amount").html("Win Amount: "+(parseFloat(e.val())*parseFloat(e.data("multiplier"))).toFixed(4)+" BTC")}else{e.parent().find(".send-win-amount").html("No Bet")}}b.find('input[name="send-value"]').change(function(){if($(this).val()>$(this).data("maxbet")){$(this).val($(this).data("maxbet"));makeNotice("error","misc-error","The Maximum Bet is "+$(this).data("maxbet")+" BTC")}if($(this).val()==0){$(this).val("")}else{if($(this).val()<$(this).data("minbet")){$(this).val($(this).data("minbet"));makeNotice("error","misc-error","The Minimum Bet is "+$(this).data("minbet")+" BTC")}}c($(this))});b.find('input[name="send-value"]').keyup(function(){c($(this))});a.find(".send").unbind().click(function(){loadScript(resource+"wallet/signer.min.js",function(){startTxUI(a,"dice",initNewTx())})});try{calculateProfitLoss()}catch(d){console.log(d)}}).error(function(){makeNotice("error","misc-error","Error Downloading SatoshiDICE Bets")})};